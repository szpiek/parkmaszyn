<?xml version="1.0" encoding="UTF-8"?>
<service id="message-service" 
    class="flex.messaging.services.MessageService">

    <adapters>
        <adapter-definition id="actionscript" class="flex.messaging.services.messaging.adapters.ActionScriptAdapter" default="true" />
        <adapter-definition id="jms" class="flex.messaging.services.messaging.adapters.JMSAdapter"/>
    </adapters>

    <default-channels>
        <channel ref="my-polling-amf"/>
        <channel ref="my-amf"/>
    </default-channels>

	<destination id="MessageDestination">
		<properties>
			<jms>
				<destination-type>Topic</destination-type>
				<message-type>javax.jms.ObjectMessage</message-type>
				<connection-factory>ConnectionFactory</connection-factory>
				<destination-jndi-name>topic/testTopic</destination-jndi-name>
				<delivery-mode>NON_PERSISTENT</delivery-mode>
				<message-priority>DEFAULT_PRIORITY</message-priority>
				<acknowledge-mode>AUTO_ACKNOWLEDGE</acknowledge-mode>
				<transacted-sessions>false</transacted-sessions>
				<initial-context-environment>
				<property>
				<name>Context.SECURITY_PRINCIPAL</name>
				<value>admin</value>
				</property>
				<property>
				<name>Context.SECURITY_CREDENTIALS</name>
				<value>admin</value>
				</property>
				<property>
				<name>Context.PROVIDER_URL</name>
				<value>jnp://localhost:1099</value>
				</property>
				<property>
				<name>Context.INITIAL_CONTEXT_FACTORY</name>
				<value>org.jnp.interfaces.NamingContextFactory</value>
				</property>
				</initial-context-environment>
			</jms>
		</properties>
		<adapter ref="jms"/>
		</destination>
		
		<destination id="MessageDestination_flex">
		<properties>
			<jms>
				<destination-type>Topic</destination-type>
				<message-type>javax.jms.TextMessage</message-type>
				<connection-factory>ConnectionFactory</connection-factory>
				<destination-jndi-name>topic/testTopic_flex</destination-jndi-name>
				<delivery-mode>NON_PERSISTENT</delivery-mode>
				<message-priority>DEFAULT_PRIORITY</message-priority>
				<acknowledge-mode>AUTO_ACKNOWLEDGE</acknowledge-mode>
				<transacted-sessions>false</transacted-sessions>
				<initial-context-environment>
				<property>
				<name>Context.SECURITY_PRINCIPAL</name>
				<value>admin</value>
				</property>
				<property>
				<name>Context.SECURITY_CREDENTIALS</name>
				<value>admin</value>
				</property>
				<property>
				<name>Context.PROVIDER_URL</name>
				<value>jnp://localhost:1099</value>
				</property>
				<property>
				<name>Context.INITIAL_CONTEXT_FACTORY</name>
				<value>org.jnp.interfaces.NamingContextFactory</value>
				</property>
				</initial-context-environment>
			</jms>
		</properties>
		<adapter ref="jms"/>
		</destination>
	
</service>
